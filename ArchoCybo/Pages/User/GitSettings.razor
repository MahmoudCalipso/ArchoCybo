@page "/user/git-settings"
@using ArchoCybo.Domain.Entities.Security
@using MudBlazor
@inject HttpClient Http
@inject ISnackbar Snackbar
@inject NavigationManager Navigation
@namespace ArchoCybo.Pages.User

<MudContainer MaxWidth="MaxWidth.Medium" Class="mt-8">
    <MudText Typo="Typo.h4" GutterBottom="true">Git Integration</MudText>
    <MudText Typo="Typo.body1" Class="mb-6">Connect your favorite Git platforms to directly push your generated code.</MudText>

    <MudGrid>
        <MudItem xs="12" md="4">
            <MudPaper Class="pa-4 d-flex flex-column align-center" Elevation="2">
                <MudIcon Icon="@Icons.Custom.Brands.GitHub" Size="Size.Large" Color="Color.Default" />
                <MudText Typo="Typo.h6" Class="mt-2">GitHub</MudText>
                @if (isGitHubConnected)
                {
                    <MudChip Color="Color.Success" Size="Size.Small">Connected as @githubUsername</MudChip>
                    <MudButton Variant="Variant.Outlined" Color="Color.Error" Size="Size.Small" Class="mt-4" OnClick="@(() => Disconnect(GitPlatform.GitHub))">Disconnect</MudButton>
                }
                else
                {
                    <MudButton Variant="Variant.Filled" Color="Color.Primary" Class="mt-4" OnClick="@(() => Connect(GitPlatform.GitHub))">Connect GitHub</MudButton>
                }
            </MudPaper>
        </MudItem>

        <MudItem xs="12" md="4">
            <MudPaper Class="pa-4 d-flex flex-column align-center mud-disabled" Elevation="2">
                <MudIcon Icon="@Icons.Custom.Brands.Microsoft" Size="Size.Large" Color="Color.Default" />
                <MudText Typo="Typo.h6" Class="mt-2">Azure DevOps</MudText>
                <MudText Typo="Typo.caption">Coming Soon</MudText>
                <MudButton Variant="Variant.Outlined" Disabled="true" Class="mt-4">Connect</MudButton>
            </MudPaper>
        </MudItem>

        <MudItem xs="12" md="4">
            <MudPaper Class="pa-4 d-flex flex-column align-center mud-disabled" Elevation="2">
                <MudIcon Icon="@Icons.Material.Filled.Build" Size="Size.Large" Color="Color.Default" />
                <MudText Typo="Typo.h6" Class="mt-2">GitLab</MudText>
                <MudText Typo="Typo.caption">Coming Soon</MudText>
                <MudButton Variant="Variant.Outlined" Disabled="true" Class="mt-4">Connect</MudButton>
            </MudPaper>
        </MudItem>
    </MudGrid>

    <MudPaper Class="pa-4 mt-8" Elevation="1">
        <MudText Typo="Typo.h6" GutterBottom="true">Configuration Instructions</MudText>
        <MudText Typo="Typo.body2">
            To use Git integration, you need to register ArchoCybo as an OAuth application on your chosen platform and provide the Client ID and Secret in the system administration.
        </MudText>
        <MudButton Variant="Variant.Text" Color="Color.Primary" Class="mt-2" StartIcon="@Icons.Material.Filled.Info">Learn more about setup</MudButton>
    </MudPaper>
</MudContainer>
